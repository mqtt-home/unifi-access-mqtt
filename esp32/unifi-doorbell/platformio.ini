[platformio]
default_envs = esp32-poe

[common]
lib_deps =
    bblanchon/ArduinoJson@^7.0.0
    knolleary/PubSubClient@^2.8
    adafruit/Adafruit NeoPixel@^1.12.0
    links2004/WebSockets@^2.4.1

; =============================================================================
; Olimex ESP32-POE (Ethernet)
; Status LED on GPIO2
; =============================================================================
[env:esp32-poe]
platform = espressif32@6.9.0
board = esp32-poe
framework = arduino
monitor_speed = 115200
lib_deps =
    bblanchon/ArduinoJson@^7.0.0
    knolleary/PubSubClient@^2.8
build_flags =
    -DCORE_DEBUG_LEVEL=3
    -DUSE_ETHERNET=1
    -DPIN_STATUS_LED=2
; Use Arduino as IDF component to access ESP-IDF APIs
board_build.embed_txtfiles =
platform_packages =
lib_ignore = WebSockets

; =============================================================================
; Waveshare ESP32-S3-Zero (WiFi) - ESP32-S3FH4R2: 4MB flash, 2MB QSPI PSRAM
; Wiki: https://www.waveshare.com/wiki/ESP32-S3-Zero
; RGB LED on GPIO21 (WS2812) - requires NeoPixel, disabled for now
; =============================================================================
[env:esp32-s3-zero]
platform = espressif32
board = esp32-s3-devkitm-1
framework = arduino
monitor_speed = 115200
lib_deps = ${common.lib_deps}
build_flags =
    -DCORE_DEBUG_LEVEL=3
    -DUSE_WIFI=1
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DPIN_STATUS_LED=-1
    ; WebSocket buffer size for large messages
    -DWEBSOCKETS_MAX_DATA_SIZE=16384
    -DWEBSOCKETS_TCP_TIMEOUT=5000
board_build.flash_mode = dio
board_build.partitions = default.csv
board_upload.flash_size = 4MB
upload_speed = 460800

; =============================================================================
; ESP32-S3-WROOM-1 DevKit (WiFi) - Uses CH340 USB-UART, not USB CDC
; NeoPixel RGB LED on GPIO48
; =============================================================================
[env:esp32-s3-wroom]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
monitor_speed = 115200
lib_deps = ${common.lib_deps}
build_flags =
    -DCORE_DEBUG_LEVEL=3
    -DUSE_WIFI=1
    -DPIN_STATUS_LED=-1
    -DPIN_NEOPIXEL=48
    ; WebSocket buffer size for large messages
    -DWEBSOCKETS_MAX_DATA_SIZE=16384
    -DWEBSOCKETS_TCP_TIMEOUT=5000
board_build.flash_mode = dio
upload_speed = 921600
